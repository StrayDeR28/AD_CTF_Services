## Описание
Сервис mail. Сервис получает на вход токен, расшифровывает его, получая логин пользователя. Затем для пользователя начинается отбражение входящих уведомлений, кто хочет добавится в друзья (логин товарища), и информация о новой открытке, от кого и что написано. Также надо следить за последним показанным сообщением по этим двум категориям, чтобы при новом подключении пользователя выводить только свежие данные. 

На игре будет представлен только бинарь.

В качестве криптографии выбрал чачу с фиксированным нонсом 0 и фиксированным ключом "The quick brown fox jumps over l ...(azy)". Конец оказывается не влез, хы. Так как иначе нужны доп параметры (нонс, ключ) или менять крипту.

Токен это HEX строка, регистр не важен. Логин ограничил 64 символами, можно подправить.

## Что добивили?
- Добавили еще одну таблицу user_last_seen, где храняться последние просмотренные записи пользователя. Ключ это логин и айпи пользователя. С вайргардом должно работать.
- Перешли на SQLite и Redis. Предполагается, что база будет развернута на сервере и будет общей для всех. К ней посылаются запросы в шаблоне, она их обрабатывает и высылает ответы. Клиенты подключаются к ней через прокси, уведомления о новых записях получают через редис.
- Добавил сеть, каждому пользователю свое соединение, чтобы не было перебоев в сообщениях. Как я понял, осталось обернуть в докер, остальное оставляем.
- Добавил обработку токена: 
  - символы должны быть hex-ые
  - длина четной
  - расшифрованный логин либо печатные аски символы, либо кириллица
- Добавил защиту от sql инъекций

## Плюсы перехода от Postger к SQLite и Redis
- Проще работать с запросами и ответами.
- Не нужно парить голову способом сохранить подключение в секрете.
- Пришлось усложнить функцию запроса, но зато это стало легко и безопасно.
- Код на удивление стал короче на четверть.
- При одновременном подключении по одному айпи и логину уведомления должны приходить на все терминалы. В Postger такое было "не под силу".

Это вроде бы все по обновам. 

## Что можно отметить? 
- Возможно с легкостью слушать других пользователей, так как используются фиксированные нонс и ключ, чтобы этого избежать можно добавить случайный нонс. Но это требует доработки ввода и таблиц по всей видимости, и "усложняет жизнь" пользователя.
- Возможно кто-то захочет переписать запрос к базе данных и вытащит от туда все секретные данные. Тут я пока думаю над реализацией в бинарнике, но сделать очень хочется.
- Данная вещь должна выдерживать человек 50 одновременно. Можно расширить до 100, если правильно помню.

